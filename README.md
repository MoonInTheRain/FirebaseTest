# 概要
このプロジェクトはFirebaseでの機能をCocosCreatorで使用する実験のためのプロジェクトです。  
個人のFirebaseのプロジェクトを使用しているので、予告なく使用できなくなる可能性があります。  

# 機能について
## TODOリスト
Firestore Databaseを使用しています。  
サーバーにデータを保存する実験の第一段階として作ったものになります。  
匿名認証のためデバイス間でデータを共有できないので、サーバーに保存している意味はないです。    

## チャット
同じくFirestore Databaseを使用しています。  
Firestoreではリアルタイム通信を簡単に実装できるということで試しに作成したものになります。  

## 五目並べ
Realtime Databaseを使用しています。（呼び出し機能は別サービス。後述）  
Firestoreでもリアルタイム通信はできるが、低遅延ならこちらの方が優れているとのことで試しに作ったものになります。  
無料プラン内で動作させたかったので、置ける場所の判定とかはクライアントに任せているのでチートはし放題。  

## 通知許可・呼び出し
Firebase Cloud Messaging（FCM）とFirebase Functionsを使用しています。  
FCM自体は無料ですが、通知用トークンの管理が必要のため従量制プランのFunctionsも利用しています。  
呼出を行うと、相手側のプレイヤーが許可していれば、バックグラウンドでも通知が届くようになっています。  

# FirebaseToolsについて
FirebaseToolsのフォルダはFirebase Hosting、Firebase Functionsのデプロイに必要なデータを置いています。  

## publicフォルダ
Firebase Hostingに必要なもので、ビルドの成果物をここに置きます。成果物は重いのでgit管理していません。  
firebase-messaging-sw.jsは通知をバックグラウンドで受け取ることができるようにするためのサービスワーカーで、  
icon.pngは通知用のアイコンになります。  

## functionsフォルダ
Firebase Functionsに必要なものになります。  
編集しているのはsrc/index.tsだけで、他は初期設定段階で自動生成されるものになります。  
通知トークンをサーバーに追加する機能と、保存したユーザー（もしくはトピック）に対して通知する機能を実装しています。  
